DO $$ 
BEGIN
    IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'transaction_mode') THEN
        CREATE TYPE TRANSACTION_MODE AS ENUM ('CHEQUE', 'NEFT', 'IMPS', 'RTGS', 'UPI');
    END IF;
END $$;

CREATE TABLE IF NOT EXISTS TRANSACTIONS (
    ID SERIAL PRIMARY KEY,
    CUSTOMER_ID INT NOT NULL,
    AMOUNT BIGINT NOT NULL,
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    MODE TRANSACTION_MODE NOT NULL
);

-- Harry's Transactions
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(1, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(1, 100000, NOW(), 'IMPS');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(1, 50000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(1, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(1, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(1, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(1, 100000, NOW(), 'NEFT');

-- Ron's Transactions
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(3, -1000, NOW(), 'UPI');


-- Lupin's Transactions
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, 100000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(5, -200000, NOW(), 'NEFT');


-- Hagrid's Transactions
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(6, 10000, NOW(), 'NEFT');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(6, -2000, NOW(), 'UPI');
INSERT INTO TRANSACTIONS(CUSTOMER_ID, AMOUNT, CREATED_AT, MODE) VALUES(6, -100, NOW(), 'UPI');
